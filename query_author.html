


<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Science of Science</title>
		
		<link href = "./css/bootstrap.min.css" rel = "stylesheet">
		<link rel="shortcut icon" href="img/logo.png" >
		<link href="./css/nifty.min.css" rel="stylesheet">
		
		<!--Nifty Premium Icon [ DEMONSTRATION ]-->
		<link href="./css/nifty-demo-icons.min.css" rel="stylesheet">
		
		<!--Demo [ DEMONSTRATION ]-->
		<link href="./css/nifty-demo-icons.min.css" rel="stylesheet">
		<link href="./css/nifty-demo.min.css" rel="stylesheet">
		<link href="./css/font-awesome.min.css" rel="stylesheet">
		
		
		<!--JAVASCRIPT-->
		<!--=================================================-->
		
		<!--Pace - Page Load Progress Par [OPTIONAL]-->
		<link href="./css/pace.min.css" rel="stylesheet">
		   
		<script src="./js/pace.min.js"></script>
		   
		
		
		<!--jQuery [ REQUIRED ]-->
		<script src="./js/jquery-2.2.4.min.js"></script>
		
		
		<!--BootstrapJS [ RECOMMENDED ]-->
		<script src="./js/bootstrap.min.js"></script>
		
		
		<!--NiftyJS [ RECOMMENDED ]-->
		<script src="./js/nifty.min.js"></script>
		<script src="./js/icons.js"></script>
		
		
		<script src="./js/echarts.min.js"></script>
		<script src='https://cdn.bootcss.com/echarts/3.7.0/echarts.simple.js'></script>
		<script src="js/echarts-wordcloud.js"></script>
		
		<!--=================================================-->
		
		<!--Demo script [ DEMONSTRATION ]-->
		<script src="./js/nifty-demo.min.js"></script>   
		
		<style>
		  html {
		    height: 100%;
		  }
		
		  body {
		  
		    height: 100%;
		  }
		
		  .container {
		    height: 100%;
		    display: flex;
		    justify-content: center;
		    align-items: center;
		    flex-direction: row;
		  }
		
		  .bgDiv {
		    box-sizing: border-box;
		    width: 1295px;
			height: 55px;
		    position: relative;
			margin-right: 220px;
		  /* position: absolute;
		  left: 50%;
		  top: 50%;
		  transform: translate(-50%, -50%); */
		  }
		
		  .search-input-text {
		    border: 1px solid #b6b6b6;
		    width: 695px;
			margin-left: 260px;
		    background: #fff;
		    height: 33px;
		    line-height: 33px;
		    font-size: 18px;
		    padding: 3px 0 0 7px;
		  }
		
		  .search-input-button {
		    width: 90px;
		    height: 38px;
		    color: #fff;
		    font-size: 16px;
		    letter-spacing: 3px;
		    background: #12aa9e;
		    border: .5px solid #2d78f4;
		    margin-left: -5px;
		    vertical-align: top;
		    opacity: .9;
		  }
		
		  .search-input-button:hover {
		    opacity: 1;
		    box-shadow: 0 1px 1px #333;
		    cursor: pointer;
		  }
		
		  .suggest {
		    width: 502px;
		    position: absolute;
		    top: 38px;
			margin-left: 260px;
		    border: 1px solid #999;
		    background: #fff;
		    display: none;
		  }
		
		  .suggest ul {
		    list-style: none;
		    margin: 0;
		    padding: 0;
		  }
		
		  .suggest ul li {
		    padding: 3px;
		    font-size: 17px;
		    line-height: 25px;
		    cursor: pointer;
		  }
		
		  .suggest ul li:hover {
		    background-color: #e5e5e5
		  }
		</style>
		
	</head>

<body>
        <!--NAVBAR-->
        <!--===================================================-->
        <header id="navbar">
            <div id="navbar-container" class="boxed">

                <!--Brand logo & name-->
                <!--================================-->
                <div class="navbar-header">
                    <a href="./index.html" class="navbar-brand">
                        <img src="./img/logo.png" alt="Nifty Logo" class="brand-icon">
                        <div class="brand-title">
                            <span class="brand-text">HOME</span>
                        </div>
                    </a>
                </div>
                <!--================================-->
                <!--End brand logo & name-->


                <!--Navbar Dropdown-->
                <!--================================-->
                <div class="navbar-content clearfix">
                    <ul class="nav navbar-top-links pull-left">

                        <!--Navigation toogle button-->
                        <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
                        <li class="tgl-menu-btn">
                            <a class="mainnav-toggle" href="#">
                                <i class="demo-pli-view-list"></i>
                            </a>
                        </li>
                        
                    </ul>
					
                    <ul class="nav navbar-top-links pull-left">
                        <h4> Data Visualization based on Science of Science </h4>
                    </ul>
					
                </div>
                <!--================================-->
                <!--End Navbar Dropdown-->

            </div>
        </header>
        <!--===================================================-->
        <!--END NAVBAR-->
    <div id="container" class="effect aside-float aside-bright mainnav-lg">
        
	<script src="js/try.js"></script>

        <div class="boxed">
            <!--CONTENT CONTAINER-->
            <!--===================================================-->
            <div id="content-container">
                <!--Page content-->
				<h2 class="text-main pad-btm bord-btm"> &nbsp; Search Authors </h2>
                <!--===================================================-->
                <div id="page-content">
                    
				
			<script type="text/javascript">
				function search() {
					 var key_word = document.getElementById('search').value;
					 console.log(key_word);
				
					$.ajaxSetup({ async: false });
					var search_data = {};
					
					$.getJSON('./data/authors.json', function (json) {
					    search_data = json;
					});

					
					var search_text = document.getElementById("search_text");
					
					console.log("data is: ");
					
					
					//console.log(search_data[0].name);
					console.log(search_data[0]._id);	
					console.log(search_data[0].links);	
					console.log(search_data[0].dblp_name);
					
					var f = 0;
					var d = "";
					key_word = key_word.replace(/\s*/g,"");
					
					for(var i in search_data){
						if(key_word.toLocaleLowerCase() == search_data[i].name.toLocaleLowerCase().replace(/\s*/g,"")){
							alert("Found the author " + search_data[i].name);
							f= 1;
							d = "<strong> Author Name: " + search_data[i].name + "</strong><br>";
							d += "<strong> Author id: " + search_data[i]._id + "</strong><br>";
							d += "<strong>  DBLP Name: " + search_data[i].dblp_name + "</strong><br>";
							d += "<strong> Current_affiliation : " + search_data[i].current_affiliation + "</strong><br>";
						
							console.log("d = " + d);
							
							//document.getElementsByClassName("mydiv").value = d;
							$('.mydiv').append(d);
							$('.mydiv').clear();
							break;
						}
						//console.log(search_data.data[i].name);
					}
				}
			</script>
			
			
			<div id="page-content">
			    
            <div class="row" style="height: 60px">
                	<h3>  &nbsp; &nbsp; Author WordCloud </h3>
            </div>
			
			<div id="main" style="width: 1850px;height:800px; align:"center"></div>
		
		 
		<div style="align-items:center; margin-top: 50px; margin-left: 250px; margin-right: 250px;" >
		 <div class="bgDiv" style="align:self">
		   <input type="text" class="search-input-text" value="" autofocus placeholder="关键词">
		   <input type="button" value="搜索一下" class="search-input-button" id="btn">
		   <div class="suggest">
		     <ul id="search-result"> </ul>
		   </div>
		 </div>
		</div>
		 
		 
			<!--div style="align-items:center; background-color: #dadada; margin-top: 50px; margin-left: 250px; margin-right: 250px;" >
				<div class="input-group" style="align-content: center;">
		            <input type="text" id="search" class="form-control input-lg"  placeholder="Input the name you want..."  style="margin: 5px;" >
			           <span class="input-group-addon btn btn-mint"  onclick="search()" >Search</span>
		        </div>
		    </div-->
				
		 	<div class="row" style="height: 600px">
		 	 			<h3> &nbsp; &nbsp; Search Result</h3>
						<div id ="mydiv" class ="mydiv" style="height: 500px; margin-left: 50px; font-size:20pt" id="search_text">
							<text style="font-size: 20px;"> </text>
						</div>
		 	 </div>
		
			</div>
			
	
			
						
        <script>
			$.ajaxSetup({ async: false });
            var chart = echarts.init(document.getElementById('main'));
			var rela = { "data": [], "links":[]};
			$.getJSON('./data/cloud-author.json', function (json) {
			    rela = json;
			});
			
            var option = {
				title: {
				    text: 'Author WordCloud'
				},
                tooltip: {},
                series: [ {
                    type: 'wordCloud',
                    gridSize: 2,
                    sizeRange: [22, 60],
                    rotationRange: [-90, 90],
                    shape:"circle",
					//shape: 'pentagon',
                    width: 600,
                    height: 400,
                    drawOutOfBound: true,
                    textStyle: {
                        normal: {
                            color: function () {
                                return 'rgb(' + [
                                    Math.round(Math.random() * 160),
                                    Math.round(Math.random() * 160),
                                    Math.round(Math.random() * 160)
                                ].join(',') + ')';
                            }
                        },
                        emphasis: {
                            shadowBlur: 10,
                            shadowColor: '#333'
                        }
                    },
                    data: rela.data
                } ]
            };

            chart.setOption(option);
        </script>
		 
		 <script>
		   var suggestContainer = document.getElementsByClassName("suggest")[0];
		   var searchInput = document.getElementsByClassName("search-input-text")[0];
		   var bgDiv = document.getElementsByClassName("bgDiv")[0];
		   var searchResult = document.getElementById("search-result");
		 
		   // 清除建议框内容
		   function clearContent() {
		     var size = searchResult.childNodes.length;
		     for (var i = size - 1; i >= 0; i--) {
		       searchResult.removeChild(searchResult.childNodes[i]);
		     }
		   };
		 
		   var timer = null;
		   // 注册输入框键盘抬起事件
		   searchInput.onkeyup = function (e) {
		     suggestContainer.style.display = "block";
		     // 如果输入框内容为空 清除内容且无需跨域请求
		     if (this.value.length === 0) {
		       clearContent();
		       return;
		     }
		     if (this.timer) {
		       clearTimeout(this.timer);
		     }
		     if (e.keyCode !== 40 && e.keyCode !== 38) {
		       // 函数节流优化
		       this.timer = setTimeout(() => {
		         // 创建script标签JSONP跨域
		         var script = document.createElement("script");
		         script.src = "https://www.baidu.com/su?&wd=" + encodeURI(this.value.trim()) +
		           "&p=3&cb=handleSuggestion";
		         document.body.appendChild(script);
		       }, 130)
		     }
		 
		   };
		 
		   // 回调函数处理返回值
		   function handleSuggestion(res) {
		     // 清空之前的数据！！
		     clearContent();
		     var result = res.s;
		     // 截取前五个搜索建议项
		     if (result.length > 4) {
		       result = result.slice(0, 5)
		     }
		     for (let i = 0; i < result.length; i++) {
		       // 动态创建li标签
		       var liObj = document.createElement("li");
		       liObj.innerHTML = result[i];
		       searchResult.appendChild(liObj);
		     }
		     // 自执行匿名函数--删除用于跨域的script标签
		     (function () {
		       var s = document.querySelectorAll('script');
		       for (var i = 1, len = s.length; i < len; i++) {
		        // document.body.removeChild(s[i]);
		       }
		     })()
		   }
		 
		 
		   function jumpPage() {
			   console.log(searchInput.value);
			   
			   $.ajaxSetup({ async: false });
			   var search_data = {};
			   
			   $.getJSON('./data/authors.json', function (json) {
			       search_data = json;
			   });
			   
			   var search_text = searchInput.value;
			   var key_word = search_text
			   
			   console.log("data is: ");
			   //console.log(search_data.data);
			   console.log(search_data[0].name);
			   console.log(search_data[0]._id);
			   console.log(search_data[0].links[0]);
			   //console.log("searching")
			   console.log(key_word)
				
			   var f = 0;
			   var d = "";
			   key_word = key_word.replace(/\s*/g,"");
			   
			   for(var i in search_data){
			   	if(key_word.toLocaleLowerCase() == search_data[i].name.toLocaleLowerCase().replace(/\s*/g,"")){
			   		alert("Found the author " + search_data[i].name);
			   		f= 1;
			   		d = "<strong> Author Name: " + search_data[i].name + "</strong><br>";
			   		d += "<strong> Author id: " + search_data[i]._id + "</strong><br>";
			   		d += "<strong>  DBLP Name: " + search_data[i].dblp_name + "</strong><br>";
			   		d += "<strong> Current_affiliation : " + search_data[i].current_affiliation + "</strong><br>";
					d += "<strong> Link : " + search_data[i].links[0] + "</strong><br>";
			   		console.log("d = " + d);
			   		$(".mydiv").empty();
					//document.getElementById("mydiv").value = d;
					//document.getElementById("mydiv").
			   		$('.mydiv').append(d);
			   		break;
			   	}
			   	//console.log(search_data.data[i].name);
			   }
			   
		 	  window.open(`https://www.baidu.com/s?word=${encodeURI(searchInput.value)}`);
		     //window.open(`https://blog.csdn.net/heiioworld1/article/details/108350632`);
		   }
		 
		   // 事件委托 点击li标签或者点击搜索按钮跳转到百度搜索页面
		   bgDiv.addEventListener("click", function (e) {
		     if (e.target.nodeName.toLowerCase() === 'li') {
		       var keywords = e.target.innerText;
		       searchInput.value = keywords;
		       jumpPage();
		     } else if (e.target.id === 'btn') {
		       jumpPage();
		     }
		   }, false);
		 
		   var i = 0;
		   var flag = 1;
		 
		   // 事件委托 监听键盘事件
		   bgDiv.addEventListener("keydown", function (e) {
		     var size = searchResult.childNodes.length;
		     if (e.keyCode === 13) {
		       jumpPage();
		     };
		     // 键盘向下事件
		     if (e.keyCode === 40) {
		       if (flag === 0) {
		         i = i + 2;
		       }
		       flag = 1;
		       e.preventDefault();
		       if (i >= size) {
		         i = 0;
		       }
		       if (i < size) {
		         searchInput.value = searchResult.childNodes[i++].innerText;
		       }
		     };
		     // 键盘向上事件
		     if (e.keyCode === 38) {
		       if (flag === 1) {
		         i = i - 2;
		       }
		       flag = 0;
		       e.preventDefault();
		       if (i < 0) {
		         i = size - 1;
		       }
		       if (i > -1) {
		         searchInput.value = searchResult.childNodes[i--].innerText;
		       }
		     };
		   }, false);
		 
		   // 点击页面任何其他地方 搜索结果框消失
		   document.onclick = () => clearContent()
		 </script>

		</div>
		   
	</div>
			   	
				

                <!--===================================================-->
                <!--End page content-->


            </div>
            <!--===================================================-->
            <!--END CONTENT CONTAINER-->

            
		<script src="js/try.js"></script>

        </div>

        <!-- FOOTER -->
        <!--===================================================-->
 

        <!--===================================================-->
        <!-- END FOOTER -->
        <!-- SCROLL PAGE BUTTON -->
        <!--===================================================-->
        <button class="scroll-top btn">
            <i class="pci-chevron chevron-up"></i>
        </button>
        <!--===================================================-->
    </div>
    <!--===================================================-->
    <!-- END OF CONTAINER -->
	

 
</script>
</body>
</html>
